{% extends 'base.html' %}
{% block content %}
<div class="container mt-4">
    <h2>Welcome, {{ user.username }}!</h2>

    <!-- Adoption Requests -->
    <h3>Your Adoption Requests</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Cat</th>
                <th>Status</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for request in adoption_requests %}
                <tr>
                    <td>{{ request.cat.name }}</td>
                    <td>{{ request.status }}</td>
                    <td>
                        {% if request.status == "Pending" %}
                            <form action="{% url 'adoption_request_cancel' request.id %}" method="post">
                                {% csrf_token %}
                                <button type="submit" class="btn btn-danger btn-sm">Cancel</button>
                            </form>
                        {% endif %}
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Adoption History -->
    <h3>Adoption History</h3>
    <ul>
        {% for cat in adopted_cats %}
            <li>{{ cat.cat.name }} - Adopted!</li>
        {% empty %}
            <p>No past adoptions.</p>
        {% endfor %}
    </ul>

    <!-- Wishlist (Favorite Cats) -->
    <h3>Wishlist (Favorite Cats)</h3>
    <ul>
        {% for favorite in favorite_cats %}
            <li>
                {{ favorite.cat.name }} 
                <form action="{% url 'remove_from_favorites' favorite.cat.id %}" method="post" style="display:inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-danger remove-favorite-btn">
                        ‚ùå Remove
                    </button>
                </form>
            </li>
        {% empty %}
            <p>No favorite cats yet.</p>
        {% endfor %}
    </ul>
    
</div>
{% endblock %}
